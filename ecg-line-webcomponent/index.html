<!-- index.html -->
<!DOCTYPE html>
<html>
  <head>
    <script src="dist/ecg-webcomponent.js"></script>
    <link rel="stylesheet" href="assets/css/styles.css">
  </head>
  <body>
    <div id="ecg-container">
      <div id="ecg-text">My Example</div>
      <ecg-line></ecg-line>
    </div>
    <script>
      (function() {
        const heartRates = [
          {rate: 60, beats: 10, text: "Resting"},
          {rate: 120, beats: 20, text: "Exercise"},
          {rate: 80, beats: 15, text: "Recovery"}
        ];
        let currentRateIndex = 0;
        let currentBeatCount = 0;
        const updateRate = () => {
          const rateInfo = heartRates[currentRateIndex];
          document.getElementById('ecg-text').innerText = rateInfo.text;
          ecgLine((bang) => setInterval(() => bang(), 60000 / rateInfo.rate));
          currentBeatCount++;
          if (currentBeatCount >= rateInfo.beats) {
            currentBeatCount = 0;
            currentRateIndex = (currentRateIndex + 1) % heartRates.length;
          }
        };
        updateRate();
        setInterval(updateRate, 1000);
      })();
    </script>
  </body>
</html>
